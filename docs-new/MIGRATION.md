# Migration from Astro to Docusaurus

This document outlines the migration from Astro/Starlight to Docusaurus for the Marco documentation.

## What Changed

### Framework

- **Before**: Astro v5 with Starlight theme
- **After**: Docusaurus v3 with Classic preset

### Key Changes

#### 1. **Component Replacements**

| Astro/Starlight                    | Docusaurus Equivalent              |
| ---------------------------------- | ---------------------------------- |
| `<Tabs syncKey="package-manager">` | `<Tabs groupId="package-manager">` |
| `<Aside type="note">`              | `:::note` (admonitions)            |
| `<Steps>`                          | Custom `<Steps>` component         |
| `<Card>` & `<CardGrid>`            | Custom React components            |
| D2 diagrams (`astro-d2`)           | Mermaid diagrams                   |
| `<Code>`                           | Standard Docusaurus code blocks    |

#### 2. **Content Structure**

- All MDX files migrated from `docs/src/content/docs/` to `docs-new/docs/`
- Frontmatter simplified:
  - `sidebar.order` → `sidebar_position`
  - Removed `tableOfContents` (auto-generated by Docusaurus)

#### 3. **Assets**

- Images moved from `docs/src/assets/` to `docs-new/static/img/`
- Logo files (light/dark SVG) copied to static folder
- All image references updated to use `/img/` paths

#### 4. **Configuration**

- Site configuration in `docusaurus.config.ts`
- Sidebar configuration in `sidebars.ts`
- Custom CSS in `src/css/custom.css`

#### 5. **Features Added**

- Google Analytics integration (gtag)
- Mermaid diagram support
- Custom homepage with feature cards
- Responsive navbar and footer

## File Mapping

### Content Files

```
docs/src/content/docs/              → docs-new/docs/
├── project/                         → project/
│   ├── introduction.mdx             → introduction.mdx ✅
│   └── quick-start.mdx              → quick-start.mdx ✅
├── api/                             → api/
│   ├── static-configuration.mdx     → static-configuration.mdx ✅
│   ├── tracking-screen.mdx          → tracking-screen.mdx ✅
│   ├── methods.mdx                  → methods.mdx ✅
│   ├── native-event.mdx             → native-event.mdx ✅
│   └── cli/                         → cli/
│       ├── overview.mdx             → overview.mdx ✅
│       ├── generate-report.mdx      → generate-report.mdx ✅
│       └── visualization.mdx        → visualization.mdx ✅
├── guides/                          → guides/
│   ├── app-startup.mdx              → app-startup.mdx ✅
│   ├── screen-load.mdx              → screen-load.mdx ✅
│   └── multiple-events.mdx          → multiple-events.mdx ✅
└── architecture/                    → architecture/
    └── draw-time-tracking.mdx       → draw-time-tracking.mdx ✅
```

### Assets

```
docs/src/assets/                     → docs-new/static/img/
├── dashboard.gif                    ✅
├── logo-dark.svg                    ✅
├── logo-light.svg                   ✅
├── app-startup-raw.png              ✅
├── app-startup-timeline.png         ✅
├── multiple-events-metrics.png      ✅
├── multiple-events-raw.png          ✅
└── multiple-events-timeline.png     ✅

docs/public/
├── banner.png                       → static/img/banner.png ✅
└── favicon.svg                      → static/img/favicon.svg ✅
```

## Development

### Start Development Server

```bash
cd docs-new
yarn start
```

### Build Production

```bash
cd docs-new
yarn build
```

### Serve Production Build

```bash
cd docs-new
yarn serve
```

## Configuration Files

### `docusaurus.config.ts`

Main configuration file with:

- Site metadata
- Navigation (navbar)
- Footer
- Google Analytics
- Mermaid support
- Theme configuration

### `sidebars.ts`

Sidebar navigation structure matching the original Astro configuration.

### `src/css/custom.css`

Custom styles for:

- Steps component
- Card/CardGrid components
- Code block enhancements
- Theme overrides

## Custom Components

Located in `src/components/`:

1. **Steps.tsx** - Numbered step-by-step instructions
2. **Card.tsx** - Feature cards and card grid layout

## Notes

### D2 Diagrams → Mermaid

The architecture diagrams were converted from D2 format to Mermaid diagrams. While Mermaid doesn't support all D2 features, it provides similar functionality and is natively supported by Docusaurus.

### Collapsible Code Sections

Docusaurus doesn't have native support for collapsible code sections like Astro's Expressive Code. This feature was removed, but can be added with a custom plugin if needed.

### Homepage

The splash page was recreated as a custom React component (`src/pages/index.tsx`) to match the original design.

## Deployment

The documentation is configured for deployment to:

- **URL**: https://marco.dreamsportslabs.com
- **GitHub**: https://github.com/ds-horizon/marco

Update the deployment workflow to build from `docs-new` instead of `docs`.

## Next Steps

1. ✅ Replace the old `docs` folder with `docs-new`
2. Update CI/CD workflows to build Docusaurus
3. Test all internal links
4. Verify all images display correctly
5. Test on mobile devices
6. Deploy to production
